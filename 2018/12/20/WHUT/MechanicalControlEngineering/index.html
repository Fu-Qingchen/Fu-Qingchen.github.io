

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Fu Qingchen">
  <meta name="keywords" content="MSE, CS">
  
    <meta name="description" content="这本课程比较考验数学，里面涉及到大量复变函数的概念和应用。">
<meta property="og:type" content="article">
<meta property="og:title" content="控制工程基础笔记">
<meta property="og:url" content="http://example.com/2018/12/20/WHUT/MechanicalControlEngineering/index.html">
<meta property="og:site_name" content="Fu&#39;s Web">
<meta property="og:description" content="这本课程比较考验数学，里面涉及到大量复变函数的概念和应用。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215355.png">
<meta property="og:image" content="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215412.png">
<meta property="og:image" content="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215424.png">
<meta property="og:image" content="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215437.png">
<meta property="og:image" content="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215451.png">
<meta property="og:image" content="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215505.png">
<meta property="og:image" content="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215520.png">
<meta property="og:image" content="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215536.png">
<meta property="og:image" content="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215552.png">
<meta property="article:published_time" content="2018-12-20T08:31:52.000Z">
<meta property="article:modified_time" content="2022-05-25T15:13:06.943Z">
<meta property="article:author" content="Fu Qingchen">
<meta property="article:tag" content="控制">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215355.png">
  
  
  
  <title>控制工程基础笔记 | Fu&#39;s Web</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.0","typing":{"enable":false,"typeSpeed":30,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"tajs":null},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 50vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fu&#39;s Web</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://gitee.com/fuqingchen/picture-lib/raw/master/img/Test_Tree.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">控制工程基础笔记</span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2018-12-20 16:31" pubdate>
          2018年12月20日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          <!-- compatible with older versions-->
          7.4k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          <!-- compatible with older versions-->
          62 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">控制工程基础笔记</h1>
            
            <div class="markdown-body">
              
              <p>这本课程比较考验数学，里面涉及到大量复变函数的概念和应用。</p>
<span id="more"></span>
<p><img src="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215355.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h1 id="Introduction-绪论"><a href="#Introduction-绪论" class="headerlink" title="Introduction //绪论"></a>Introduction //绪论</h1><ul>
<li><p>机械控制工程实质：研究机械工程技术广义系统中的动力学问题</p>
</li>
<li><p>系统的性能不仅与系统的元素有关，还与系统的结构有关</p>
</li>
<li>系统往往在时域、频域或空域等域内表现出动态特性</li>
<li>对机械系统，系统的输入与输出分别称为 “激励” 和 “相应”</li>
<li>开环系统：没反馈回路的系统<ul>
<li>特点：结构简单，成本低</li>
</ul>
</li>
<li>闭环系统：有反馈回路的系统</li>
<li>对控制系统的基本要求：快、准、<strong>稳</strong></li>
</ul>
<h1 id="Mathematical-models-数学模型"><a href="#Mathematical-models-数学模型" class="headerlink" title="Mathematical models //数学模型"></a>Mathematical models //数学模型</h1><h2 id="Laplace-Transform"><a href="#Laplace-Transform" class="headerlink" title="Laplace Transform"></a>Laplace Transform</h2><h3 id="Definition"><a href="#Definition" class="headerlink" title="Definition:"></a>Definition:</h3><script type="math/tex; mode=display">
L(f(t))=F(s)=\int_0^\infty f(t)e^{-st}dt</script><h3 id="Typically-Laplace-Transform"><a href="#Typically-Laplace-Transform" class="headerlink" title="Typically Laplace Transform"></a>Typically Laplace Transform</h3><script type="math/tex; mode=display">
L(1)=\frac1s</script><blockquote>
<p>unit impulse //单位阶跃</p>
</blockquote>
<script type="math/tex; mode=display">
L(t)=\frac1{s^2}</script><blockquote>
<p>unit step//单位斜坡</p>
</blockquote>
<script type="math/tex; mode=display">
L(e^{at})=\frac1{s-a}</script><script type="math/tex; mode=display">
L(\sin\omega t)=\frac\omega{s^2+\omega^2}</script><script type="math/tex; mode=display">
L(\cos\omega t)=\frac s{s^2+\omega^2}</script><script type="math/tex; mode=display">
L(t^n)=\frac{n!}{t^{n+1}}</script><script type="math/tex; mode=display">
L(\lim\limits_{\varepsilon\rightarrow0}\frac1\varepsilon)=1</script><blockquote>
<p>unit impulse //单位脉冲</p>
</blockquote>
<h3 id="Properties-of-Laplace-Transform-拉普拉斯变换的性质"><a href="#Properties-of-Laplace-Transform-拉普拉斯变换的性质" class="headerlink" title="Properties of Laplace Transform //拉普拉斯变换的性质"></a>Properties of Laplace Transform //拉普拉斯变换的性质</h3><p>Under the Zero state response:</p>
<script type="math/tex; mode=display">
L[a_1f_1(x)+a_2f_2(x)]=a_1F_1(s)+a_2F_2(s)</script><script type="math/tex; mode=display">
L[f(t-a)]=e^{-as}F(s)</script><script type="math/tex; mode=display">
L[f^{(n)}(x)]=s^nF(s)</script><script type="math/tex; mode=display">
L[\int f(x)dx^n]=\frac1{s^n}F(s)</script><script type="math/tex; mode=display">
\lim\limits_{t\rightarrow0}f(t)=\lim\limits _{s\rightarrow\infty}sF(s)</script><script type="math/tex; mode=display">
\lim\limits_{t\rightarrow\infty}f(t)=\lim\limits _{s\rightarrow0}sF(s)</script><p>应该就这些了。。。</p>
<blockquote>
<p>Laplace变换的起源：</p>
</blockquote>
<iframe id=sbrxp src="//player.bilibili.com/player.html?aid=8970989&bvid=BV1Xx411k7FE&cid=204595985&page=2" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="width: 720px; height: 430px; max-width: 100%"> </iframe>

<h2 id="Mathmatical-Model"><a href="#Mathmatical-Model" class="headerlink" title="Mathmatical Model"></a>Mathmatical Model</h2><ul>
<li>微分方程是在<strong>时域</strong>中描述系统动态特性的数学模型</li>
<li>传递函数是在<strong>复域</strong>中描述系统动态特性的数学模型</li>
<li>线性定常系统：$\ddot x_o(t)+3\dot x_o(t)+x_o(t)=4\dot x_i(t)+5x_i(t)$ </li>
<li>线性时变系统：$\ddot x_o(t)+3t\dot x_o(t)+x_o(t)=4\dot x_i(t)+5x_i(t)$</li>
<li>非线性系统：$\ddot x_o(t)+3x_o\dot x_o(t)+x_o(t)=4\dot x_i(t)+5x_i(t)$  </li>
</ul>
<h3 id="典型元件微分方程"><a href="#典型元件微分方程" class="headerlink" title="典型元件微分方程"></a>典型元件微分方程</h3><h4 id="机械系统"><a href="#机械系统" class="headerlink" title="机械系统"></a>机械系统</h4><ul>
<li>质量元件：$f=m\ddot x,T=J\ddot\theta$</li>
<li>弹性元件：$f=kx,T=k\theta$</li>
<li>阻尼元件：$f=c\dot x,T=c\dot\theta$</li>
</ul>
<h4 id="电网系统"><a href="#电网系统" class="headerlink" title="电网系统"></a>电网系统</h4><ul>
<li>电容：$u=\frac1C\int idt$</li>
<li>电感：$u=L\frac{di}{dt}$</li>
<li>电阻：$u=Ri$</li>
</ul>
<h2 id="Transfer-Function"><a href="#Transfer-Function" class="headerlink" title="Transfer Function"></a>Transfer Function</h2><ul>
<li><p>零初始条件</p>
</li>
<li><p>线性定常系统</p>
</li>
<li>系统输出的Laplace变换与系统输入的Laplace变换之比</li>
</ul>
<p>For a general n^{th}-order linear ,time invariant differential equation:</p>
<script type="math/tex; mode=display">
a_n\frac{d^nx_o(t)}{dt^n}+a_{n-1}\frac{d^{n-1}x_o(t)}{dt^{n-1}}+...+a_0x_o=b_m\frac{d^mx_i(t)}{dt^m}+b_{m-1}\frac{d^{m-1}x_i(t)}{dt^{m-1}}+...+b_0x_i</script><p>The Transfer Function is</p>
<script type="math/tex; mode=display">
G(s)=\frac{b_ms^m+b_{m-1}s^{m-1}+...+b_0}{a_ns^n+a_{n-1}s^{n-1}+...+a_0}\\
X_o(s)=G(s)X_i(s)</script><ul>
<li>传递函数的分母与外界无关，分子反映与外界的关系</li>
<li>相似系统传递函数相同</li>
</ul>
<p>传递函数的零极点模型</p>
<script type="math/tex; mode=display">
G(s)=\frac{K(s-z_1)(s-z_2)...(s-z_3)}{(s-p_1)(s-p_2)...(s-p_3)}</script><ul>
<li><p>$z_1,z_2…$ : 零点；$p_1,p_2$: 极点；$K$: 开环增益</p>
</li>
<li><p>系统的零点、极点对系统动态性能有影响，其中：零点影响系统的瞬态性能，极点影响系统的稳态性能</p>
</li>
</ul>
<blockquote>
<p>对系统的研究可以转化为对零点、极点、开环增益的研究</p>
</blockquote>
<h3 id="典型环节传递函数"><a href="#典型环节传递函数" class="headerlink" title="典型环节传递函数"></a>典型环节传递函数</h3><p><img src="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215412.png" srcset="/img/loading.gif" lazyload alt=""></p>
<blockquote>
<p>这个图是为了解释下面那个表的</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:center">传递函数</th>
<th style="text-align:center">特点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">比例环节</td>
<td style="text-align:center">$k$</td>
<td style="text-align:center">不失真、不延迟</td>
</tr>
<tr>
<td style="text-align:center">惯性环节</td>
<td style="text-align:center">$1/(Ts+1)$</td>
<td style="text-align:center">输出不能立即到达稳态</td>
</tr>
<tr>
<td style="text-align:center">微分环节</td>
<td style="text-align:center">$s$</td>
<td style="text-align:center">反映输出的变化趋势</td>
</tr>
<tr>
<td style="text-align:center">积分环节</td>
<td style="text-align:center">$1/s$</td>
<td style="text-align:center">输出的累加效应</td>
</tr>
<tr>
<td style="text-align:center">延时环节</td>
<td style="text-align:center">$e^{-τs}$</td>
<td style="text-align:center">输出滞后</td>
</tr>
<tr>
<td style="text-align:center">振荡环节</td>
<td style="text-align:center">${w_n^2}/({s^2+2\xi w_ns+w_n^2})$</td>
<td style="text-align:center">$0&lt;\xi&lt;1$ 震荡</td>
</tr>
</tbody>
</table>
</div>
<h3 id="对振荡环节"><a href="#对振荡环节" class="headerlink" title="对振荡环节"></a>对振荡环节</h3><p>传递函数</p>
<script type="math/tex; mode=display">
\frac{\omega_n^2}{s^2+2\xi\omega_n s+\omega_n^2}</script><p>或</p>
<script type="math/tex; mode=display">
\frac1{T^2s^2+2\xi Ts+1}</script><p>其中：$\xi$ 为阻尼比，$\omega_n$ 为无阻尼固有频率， $\omega_n=1/T$ </p>
<p><img src="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215424.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>当 $0&lt;\xi<1$ 时输出存在震荡，$\xi$ 越小，震荡越剧烈；$\xi>1$ 时，无震荡</p>
<h2 id="Block-Diagram-Models-方框图模型"><a href="#Block-Diagram-Models-方框图模型" class="headerlink" title="Block Diagram Models //方框图模型"></a>Block Diagram Models //方框图模型</h2><h3 id="Equivalent-Diagram-等效图"><a href="#Equivalent-Diagram-等效图" class="headerlink" title="Equivalent Diagram//等效图"></a>Equivalent Diagram//等效图</h3><p><img src="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215437.png" srcset="/img/loading.gif" lazyload alt=""></p>
<blockquote>
<p>方框图变化的要点就是变化前后传递函数不改变</p>
</blockquote>
<h3 id="Discussion-on-Feedback-Control-System"><a href="#Discussion-on-Feedback-Control-System" class="headerlink" title="Discussion on Feedback Control System"></a>Discussion on Feedback Control System</h3><p>Feedback Control System is at Equivalent Diagram Picture No.3</p>
<ul>
<li>Open loop transfer function $G_k=G_1G_2$ //开环传递函数</li>
<li>Feed forward transfer function $G=G_1$ //前向通道传递函数</li>
<li>Close loop transfer function ${G_1}/({1\mp G_1G_2})$ //闭环传递函数</li>
</ul>
<h3 id="※梅勋公式-梅森增益公式"><a href="#※梅勋公式-梅森增益公式" class="headerlink" title="※梅勋公式(梅森增益公式)"></a>※梅勋公式(梅森增益公式)</h3><ul>
<li>只有一条前向通道</li>
<li>各反馈回路包含公共传递函数方框</li>
</ul>
<script type="math/tex; mode=display">
G=\frac{\prod G_{FeedForward}}{1\pm\sum[G_{OpenLoop}]}</script><h1 id="Time-domain-analysis-时间响应分析"><a href="#Time-domain-analysis-时间响应分析" class="headerlink" title="Time-domain analysis //时间响应分析"></a>Time-domain analysis //时间响应分析</h1><p>时间响应主要研究系统是 <strong>瞬态性能</strong></p>
<h2 id="时间响应及其组成"><a href="#时间响应及其组成" class="headerlink" title="时间响应及其组成"></a>时间响应及其组成</h2><p>时间响应：在输入作用下，输出在时域的表现形式，在数学上就是系统动力学方程的解。</p>
<p>对于一般的方程，这个解是</p>
<script type="math/tex; mode=display">
y(t)=\sum\limits_{i=1}^nA_{1i}e^{s_it}+\sum\limits_{i=1}^nA_{2i}e^{s_it}+B(t)</script><p>$s_i$ 为微分方程特征根。</p>
<ul>
<li><p>当特征根都位于复平面的左半平面时，系统自由响应收敛于0，此时，<strong>系统稳定</strong> </p>
<blockquote>
<p>此时的自由响应项称为 <strong>瞬态响应</strong>，强迫响应项称为 <strong>稳态响应</strong></p>
</blockquote>
</li>
<li><p>若存在特征根有一个位于右半平面，系统自由响应发散</p>
</li>
<li>若存在特征根有一个位于虚轴上，系统自由项等幅振荡</li>
</ul>
<blockquote>
<p>对于非齐次微分方程 $y’+P(x)y=Q(x)$，其解的结构为：非齐次微分方程 = 齐次的通解 + 非齐次的特解，$y=Ce^{-\int P(x)dx}+e^{-\int P(x)dx}\int Q(x)e^{\int P(x)dx}dx$，刚好与上面的对应</p>
</blockquote>
<ul>
<li>第一项为<strong>零输入响应</strong>，后面那两项是<strong>零状态响应</strong></li>
<li>前两项为<strong>自由响应项</strong>，后一项为<strong>强迫响应项</strong></li>
<li>系统阶次 $n$ 和方程特征根 $s_i$ 只与系统有关，与输入无关</li>
<li>对于线性系统，若由输入为 $x(t)$ 引起的输出 $y(t)$ ，则由输入为 $x’(t)$ 引起的输出 $y’(t)$ </li>
</ul>
<h2 id="一阶系统的时间响应"><a href="#一阶系统的时间响应" class="headerlink" title="一阶系统的时间响应"></a>一阶系统的时间响应</h2><p><img src="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215451.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>对 $G(s)={1}/{(Ts+1)}$ 来说</p>
<h3 id="单位脉冲响应"><a href="#单位脉冲响应" class="headerlink" title="单位脉冲响应"></a>单位脉冲响应</h3><script type="math/tex; mode=display">
x_i(t)=\lim\limits_{\varepsilon\rightarrow0}\frac 1\varepsilon\Rightarrow X_i(s)=1\\
X_o(s)=X_i(s)G(s)=\frac 1 {Ts+1}\\
x_o(t)=L^{-1}(\frac 1T\frac1{s+\frac1T})=\frac 1Te^{-\frac tT}</script><h3 id="单位阶跃响应"><a href="#单位阶跃响应" class="headerlink" title="单位阶跃响应"></a>单位阶跃响应</h3><script type="math/tex; mode=display">
x_i(t)=1\Rightarrow X_i(s)=\frac 1s\\
X_o(s)=X_i(s)G(s)=\frac 1 {s}\frac 1 {Ts+1}\\
x_o(t)=L^{-1}(\frac 1s-\frac T{Ts+1})=1-e^{-\frac tT}</script><h3 id="性能指标"><a href="#性能指标" class="headerlink" title="性能指标"></a>性能指标</h3><p>$t_s$<strong>调整时间</strong> </p>
<p>一阶系统在阶跃输入下达到稳态的 $(1-\Delta)$ 时所用的时间 （ $\Delta$ 为容许误差）</p>
<script type="math/tex; mode=display">
\Delta =2\%,t_s=4T,\Delta=5\%,t_s=3T</script><p>$t_s$ 反应系统的快速性，T越大，调整时间越大，响应速度越慢</p>
<h2 id="二阶系统的时间响应"><a href="#二阶系统的时间响应" class="headerlink" title="二阶系统的时间响应"></a>二阶系统的时间响应</h2><p>对 $G(s)=\frac{\omega_n^2}{s^2+2\xi\omega_n s+\omega_n^2}$ 来说：</p>
<p>特征方程：${s^2+2\xi\omega_n s+\omega_n^2}$ </p>
<p>特征根：$s=\xi\omega_n\pm\omega_n\sqrt{1-\xi^2}$ </p>
<ul>
<li>$\omega_n$ 为无阻尼固有频率，令 $\omega_d=\omega_n\sqrt{1-\xi^2}$ ，称为有阻尼固有频率</li>
<li>$\xi=0$ ，系统为无阻尼系统，等幅振荡</li>
<li>$0&lt;\xi&lt;1$ ，系统为欠阻尼系统，震荡收敛</li>
<li>$\xi=1$，系统为临界阻尼系统，不震荡收敛</li>
<li>$\xi&gt;1$ ，系统为过阻尼系统，不震荡收敛</li>
</ul>
<p><img src="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215505.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h3 id="性能指标-1"><a href="#性能指标-1" class="headerlink" title="性能指标"></a>性能指标</h3><p><img src="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215520.png" srcset="/img/loading.gif" lazyload alt=""></p>
<ul>
<li>上升时间 ：系统第一次到达稳态的时间</li>
</ul>
<script type="math/tex; mode=display">
t_r=\frac{\pi-\arctan\frac{\sqrt{1-\xi^2}}{\xi}}{\omega_d}</script><ul>
<li>峰值时间：系统第一次到达峰值的时间</li>
</ul>
<script type="math/tex; mode=display">
t_p=\frac{\pi}{\omega_d}</script><ul>
<li>最大超调量：(峰值 - 稳态)/峰值</li>
</ul>
<script type="math/tex; mode=display">
M_p=\frac{x_o(t_p)-x_o(\infty)}{x_o(\infty)}=e^{-\frac{\xi\pi}{\sqrt{1-\xi^2}}}</script><ul>
<li>调整时间，当 $0&lt;\xi&lt;0.7$ 时</li>
</ul>
<script type="math/tex; mode=display">
t_s\approx\frac{4}{\xi\omega_n}(\Delta=2\%),t_s\approx\frac{3}{\xi\omega_n}(\Delta=5\%)</script><blockquote>
<ul>
<li>$\xi$  主要与震荡性（稳定性）正相关，$\omega_n$ 主要与快速性正相关。</li>
<li>系统的响应速度往往与震荡性能之间是矛盾的</li>
<li>$\omega_d=\omega_n\sqrt{1-\xi^2}$ </li>
</ul>
</blockquote>
<h2 id="高阶系统时间响应"><a href="#高阶系统时间响应" class="headerlink" title="高阶系统时间响应"></a>高阶系统时间响应</h2><p>分析高阶系统时间响应的主要思路是把它近似成低阶的叠加，其系统响应特性主要由 <strong>主导极点</strong> 决定</p>
<p><strong>主导极点</strong> ：系统离虚轴最近的极点，其实部小于其他实部的 1/5 ，且附近不存在极点</p>
<h2 id="系统偏差"><a href="#系统偏差" class="headerlink" title="系统偏差"></a>系统偏差</h2><p>在闭环传递系统中：</p>
<script type="math/tex; mode=display">
e_{ss}(t)=\lim\limits_{t\rightarrow\infty}e(t)=\lim\limits_{t\rightarrow0}sE(s)=\lim\limits_{t\rightarrow0}s\frac{1}{1+G(s)H(s)}X_i(s)</script><p>​    其中，当 $G(s)$ 为前向通道传递函数， $H(s)$ 为反馈回路传递函数时，$E(s)=G(s)$</p>
<ul>
<li>单位阶跃输入</li>
</ul>
<script type="math/tex; mode=display">
e_{ss}(t)=\lim\limits_{t\rightarrow0}\frac1{1+G(s)H(s)}=\frac1{1+K_p}</script><p>​    $K_p=G(s)H(s)$ ：位置无偏系数</p>
<ul>
<li>单位斜坡输入</li>
</ul>
<script type="math/tex; mode=display">
e_{ss}(t)=\lim\limits_{t\rightarrow0}\frac1{sG(s)H(s)}=\frac1{K_v}</script><p>​    $K_v=sG(s)H(s)$ ：速度无偏系数</p>
<ul>
<li>单位加速度输入</li>
</ul>
<script type="math/tex; mode=display">
e_{ss}(t)=\lim\limits_{t\rightarrow0}\frac1{s^2G(s)H(s)}=\frac1{K_a}</script><p>​    $K_a=s^2G(s)H(s)$ ：加速度无偏系数</p>
<p>对一般的系统：</p>
<script type="math/tex; mode=display">
G(s)H(s)=\frac{K\prod(T_is+1)}{s^v\prod(T_js+1)}</script><p>​    $v$：系统阶数</p>
<blockquote>
<p>设计系统时最好不要超过两阶</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">输入</th>
<th style="text-align:center">0阶</th>
<th style="text-align:center">1阶</th>
<th style="text-align:center">2阶</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">单位阶跃</td>
<td style="text-align:center">1/(1+Kp)</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">单位斜坡</td>
<td style="text-align:center">∞</td>
<td style="text-align:center">1/Kv</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">单位加速度</td>
<td style="text-align:center">∞</td>
<td style="text-align:center">∞</td>
<td style="text-align:center">1/Ka</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>型次越高，稳态误差越小</li>
<li>开环增益越大，稳态误差越小</li>
</ul>
<h1 id="Frequency-Domain-Anaysis-频率特性分析"><a href="#Frequency-Domain-Anaysis-频率特性分析" class="headerlink" title="Frequency Domain Anaysis //频率特性分析"></a>Frequency Domain Anaysis //频率特性分析</h1><p>频率特性是频域中描述系统动态特性的数学模型，是单位脉冲函数下的傅里叶变换</p>
<ul>
<li>时间响应：系统在阶跃或脉冲下的瞬态响应</li>
<li>频域分析：系统在谐波输入下的稳态响应</li>
</ul>
<p>系统在谐波下的稳态输出为</p>
<script type="math/tex; mode=display">
x_o(t)=|G(j\omega)|X_isin[\omega t+\angle G(j\omega)]</script><ul>
<li>幅频特性：$A(\omega)=|G(j\omega)|$ </li>
<li>相频特性：$\varphi(\omega)=\angle G(j\omega)$ </li>
</ul>
<h2 id="Nyquist图"><a href="#Nyquist图" class="headerlink" title="Nyquist图"></a>Nyquist图</h2><p><img src="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215536.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>其中，对 </p>
<script type="math/tex; mode=display">
G_1(s)=\frac{T_1s+1}{T_2s+1}\\
G_2(s)=-\frac{T_1s+1}{T_2s+1}</script><p>有简便计算方法</p>
<script type="math/tex; mode=display">
|G_1(j\omega)|=|G_2(j\omega)|=\frac{\sqrt{1+T_1^2\omega^2}}{\sqrt{1+T_2^2\omega^2}}\\
\angle G_1(j\omega)=\arctan T_1\omega-\arctan T_2\omega\\
\angle G_2(j\omega)=\pi+\arctan T_1\omega-\arctan T_2\omega\\</script><p>对振荡环节：</p>
<ul>
<li>当 $0&lt;\xi&lt;0.707$ 时，$|G(j\omega)|$ 在 $w_r=\omega_n\sqrt{1-2\xi}$ 处取得峰值</li>
<li><p>当 $\xi&gt;0.707$ 时，不出现峰值</p>
</li>
<li><p>谐振频率：$\omega_r=w_n\sqrt{1-2\xi^2}$ </p>
</li>
</ul>
<h2 id="Bode图"><a href="#Bode图" class="headerlink" title="Bode图"></a>Bode图</h2><ol>
<li>$G(s)$ 化成标准型，计算 $G(j\omega)$ </li>
<li>计算转角频率，并有小到大表在对数坐标轴上</li>
<li>过点 $(1,20\lg K)$ 作斜率为 $-20v$ 的直线</li>
<li>延长该直线，每遇到一个转角频率就改变一次斜率，其原则是：<ul>
<li>一阶微分环节：+20</li>
<li>二阶微分环节：+40</li>
<li>惯性环节：-20</li>
<li>振荡环节：-40</li>
</ul>
</li>
</ol>
<h2 id="频域性能指标"><a href="#频域性能指标" class="headerlink" title="频域性能指标"></a>频域性能指标</h2><ul>
<li>零频值 $A(0)=|G(j0)|$ ，越靠近1越好</li>
<li>复现频率 $\omega_M$ ：事先规定一个 $\Delta$ 作为低频输入信号的允许误差，$\omega_M$ 是幅频特性第一次与 $A(0)$ 相差 $\Delta$ 时的频率，$0-\omega_M$ 为复现带宽</li>
<li>幅频特性出现最大值时，对应的频率为谐振频率 $\omega_r$ ，其幅值 $A(j\omega_r)=A_M$ 为谐振频率，相对谐振峰值 $M_r=A_M/A(0)$</li>
<li>$A(0)$ 下降到 $0.707A(0)$ 时的频率叫做截止频率 $\omega_b$ ，$0-\omega_b$ 为截止带宽</li>
</ul>
<h1 id="Stability-of-linear-systems-系统稳定性"><a href="#Stability-of-linear-systems-系统稳定性" class="headerlink" title="Stability of linear systems //系统稳定性"></a>Stability of linear systems //系统稳定性</h1><ul>
<li>系统是否稳定，取决于系统本身，与输入无关</li>
<li>不稳定现象的存在是因为有反馈回路</li>
<li>稳定是自由响应的收敛性</li>
</ul>
<p>通过特征根判断系统是否稳定</p>
<ul>
<li>稳定：<strong>所有极点都位于 $[s]$ 平面左半平面</strong></li>
<li>不稳定：有极点都位于 $[s]$ 平面右半平面</li>
<li>临界稳定：有极点位于 $[s]$ 平面虚轴，其他都位于左半平面</li>
<li>稳定：有极点位于 $[s]$ 平面原点，其他都位于左半平面</li>
</ul>
<blockquote>
<p>PPT上说所有极点都位于 $[s]$ 平面左半平面是系统稳定的充要条件</p>
</blockquote>
<h2 id="关于稳定性的一些提法"><a href="#关于稳定性的一些提法" class="headerlink" title="关于稳定性的一些提法"></a>关于稳定性的一些提法</h2><ul>
<li>李亚普诺夫意义下的稳定：扰动使系统偏离，但是偏离在一定范围内，这个就是稳定</li>
<li>渐进稳定：由初态引起的偏差最终削减为0</li>
<li>小偏差稳定：由初态引起的偏差在一定范围内稳定</li>
</ul>
<h2 id="Routh判据"><a href="#Routh判据" class="headerlink" title="Routh判据"></a>Routh判据</h2><p>通过对特征根的分析，判断特征根的分布，判断稳定性</p>
<p>系统稳定充要条件：Routh 表每一列元素符号都为正，且不为0</p>
<h3 id="特殊情况"><a href="#特殊情况" class="headerlink" title="特殊情况"></a>特殊情况</h3><ul>
<li>任意一列第一行为0：用一个很小的正数 $\varepsilon$ 代替</li>
<li>其中一行所有元素为0：用该行的上一行的元构成一个辅助多项式，并用这个多项式方程的导数组成下一行</li>
</ul>
<h2 id="Nyquist判据"><a href="#Nyquist判据" class="headerlink" title="Nyquist判据"></a>Nyquist判据</h2><p>略</p>
<h2 id="相对稳定性"><a href="#相对稳定性" class="headerlink" title="相对稳定性"></a>相对稳定性</h2><p><img src="https://cquf-piclib.oss-cn-hangzhou.aliyuncs.com/20200823215552.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h3 id="相位裕度-gamma"><a href="#相位裕度-gamma" class="headerlink" title="相位裕度 $\gamma$"></a>相位裕度 $\gamma$</h3><script type="math/tex; mode=display">
\gamma=180°+\varphi(\omega_c)</script><p>​    其中：$\omega_c$ 为剪切频率（又叫做幅值穿越频率）</p>
<ul>
<li>$\omega_c$ 为 Nyquist 图与单位圆的交点，是 Bode 图与横轴的交点，即 $|G(j\omega_c)H(j\omega_c)|=1$ </li>
<li>对于稳定系统，$\gamma&gt;0$ </li>
</ul>
<h2 id="幅值裕度-K-g"><a href="#幅值裕度-K-g" class="headerlink" title="幅值裕度 $K_g$"></a>幅值裕度 $K_g$</h2><script type="math/tex; mode=display">
K=\frac1{|G(j\omega_g)H(j\omega_g)|}</script><p>​    其中：$\omega_g$ 为相位穿越频率</p>
<ul>
<li>$\omega_g$ 为 Nyquist 图与负实轴的交点，是 Bode 图与180°的交点，即 $|G(j\omega_g)H(j\omega_g)|=1$ </li>
<li>对于稳定系统，$K_g&gt;1,K(dB)&gt;0$  </li>
</ul>
<blockquote>
<p>增益 K 会使相位裕度和幅值裕度变小，使系统相对稳定性变差</p>
</blockquote>
<h1 id="System-Compensation-系统校正"><a href="#System-Compensation-系统校正" class="headerlink" title="System Compensation //系统校正"></a>System Compensation //系统校正</h1><h2 id="性能指标-2"><a href="#性能指标-2" class="headerlink" title="性能指标"></a>性能指标</h2><ul>
<li>时域性能指标<ul>
<li>调整时间 $t_s$ </li>
<li>上升时间 $t_r$ </li>
<li>峰值时间 $t_p$ </li>
<li>最大超调量 $M_p$  </li>
</ul>
</li>
<li>频域性能指标<ul>
<li>相位裕度 $\gamma$ </li>
<li>幅值裕度 $K_g$ </li>
<li>复现频率 $\omega_M$ </li>
<li>谐振频率 $\omega_r$ </li>
<li>截止频率 $\omega_b$ </li>
</ul>
</li>
</ul>
<h2 id="系统校正"><a href="#系统校正" class="headerlink" title="系统校正"></a>系统校正</h2><p>在系统中增加新的环节，以改善系统系性能</p>
<h3 id="相位超前"><a href="#相位超前" class="headerlink" title="相位超前"></a>相位超前</h3><ul>
<li><p>既提高系统<strong>快速性</strong>和<strong>相对稳定性</strong>，有保证其他性能不会变差</p>
</li>
<li><p>使截止频率及更高频率相位提前</p>
<ul>
<li>增大相位裕度（增加相对稳定性）</li>
<li>增大带宽（增加响应速度）</li>
</ul>
</li>
</ul>
<blockquote>
<p>带宽越大，响应速度越快</p>
</blockquote>
<h3 id="相位滞后"><a href="#相位滞后" class="headerlink" title="相位滞后"></a>相位滞后</h3><ul>
<li>减小<strong>稳态误差</strong>又不影响稳定性和快速性</li>
<li>使低频段增益增加</li>
</ul>
<h3 id="相位超前滞后"><a href="#相位超前滞后" class="headerlink" title="相位超前滞后"></a>相位超前滞后</h3><h3 id="PID"><a href="#PID" class="headerlink" title="PID"></a>PID</h3><ul>
<li>P：Proportional 比例（对应上面的增益）</li>
<li>I：Integral 积分 （有滞后效应）</li>
<li>D：Derivative 微分（有超前效应）</li>
</ul>
<h4 id="PD调节器"><a href="#PD调节器" class="headerlink" title="PD调节器"></a>PD调节器</h4><p>对应相位超前</p>
<h4 id="PI调节器"><a href="#PI调节器" class="headerlink" title="PI调节器"></a>PI调节器</h4><p>对应相位滞后</p>
<h4 id="PID调节器"><a href="#PID调节器" class="headerlink" title="PID调节器"></a>PID调节器</h4><p>对应相位超前-滞后</p>
<hr>
<p>Learning By Sharing，2018©Fu_Qingchen，Markdown，$\LaTeX$</p>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96%E7%9B%B8%E5%85%B3/" class="category-chain-item">自动化相关</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E6%8E%A7%E5%88%B6/">#控制</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>控制工程基础笔记</div>
      <div>http://example.com/2018/12/20/WHUT/MechanicalControlEngineering/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Fu Qingchen</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2018年12月20日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2018/12/21/WHUT/OptimalDesignOfMachine/" title="最优化技术笔记">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">最优化技术笔记</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2018/12/12/WHUT/JiXieZhiZaoGongYiXue/" title="机械制造工艺学笔记">
                        <span class="hidden-mobile">机械制造工艺学笔记</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.4.16/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"DNr2pgYBNbnn4YMKmdstH2Sw-gzGzoHsz","appKey":"6RRAdTwPs2Y3Tk5iKNo2qo1D","path":"window.location.pathname","placeholder":"说点什么","avatar":"retro","meta":["nick","mail"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":false,"serverURLs":"https://dnr2pgyb.lc-cn-n1-shared.com","emojiCDN":null,"emojiMaps":null,"enableQQ":false,"appid":"DNr2pgYBNbnn4YMKmdstH2Sw-gzGzoHsz","appkey":"6RRAdTwPs2Y3Tk5iKNo2qo1D"},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>







  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
